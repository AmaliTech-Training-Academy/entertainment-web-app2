<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="./assets/favicon-32x32.png"
    />
    <link rel="stylesheet" href="nav.css" />
    <!-- <link rel="stylesheet" href="index.css" />
    <link rel="stylesheet" href="movies.css" /> -->
    <link rel="stylesheet" href="searchbar.css" />
    <link rel="stylesheet" href="bookmarked.css"/>

    <title>Frontend Mentor | Entertainment web app</title>
  </head>
  <body>
    <main>
      <nav>
        <div class="logo"></div>
        <div class="links">
          <a class="home" href="index.html"></a>
          <a class="movies" href="movies.html"></a>
          <a class="tv-series" href="series.html"></a>
          <a class="bookmarks" href="bookmarked.html"></a>
        </div>
        <div class="user-avatar">
          <a href="login.html"></a>
        </div>
      </nav>
      <section>
        <header>
          <form>
            <div class="search"></div>
            <input type="search" placeholder="Search for bookmarked shows" />
          </form>
          <div class="trending">
            <h1>Bookmarked Movies</h1>
            <div class="movies-items"></div>
          </div>
        </header>
        <div class="options">
          <h1>Bookmarked TV Series</h1>
          <div class="series-items"></div>
        </div>
      </section>
    </main>

    <!-- Display recommended shows -->

    
    <script>
      document.addEventListener("DOMContentLoaded", (evt) => {
        fetchBookmarks();
      });

      const renderMovie = (movie) => `
      <div class="movie">
      <div class="movie-image">
        <img class="large" src="${movie.thumbnail.regular.large}">
        <img class="medium" src="${movie.thumbnail.regular.medium}">
        <img class="small" src="${movie.thumbnail.regular.small}">
      </div>
      <div class="movie-info">
        <div class="about">${movie.year}
          <div class="oval"></div>
        <span style="background:url(${movie.logo})"></span>${movie.category}
        <div class="oval">
        </div>${movie.rating}
        </div>
        <h3 class="movie-title">${movie.title}</h3>
      </div>
      <div class="bookmark-btn"><svg width="12" height="14" xmlns="http://www.w3.org/2000/svg"><path d="m10.518.75.399 12.214-5.084-4.24-4.535 4.426L.75 1.036l9.768-.285Z"></path></svg>
      </div>
      <div class="play">
        <div class="play-btn">
        </div><p>Play</p></div>
    </div>
  `;

      function fetchBookmarks() {
        const movieItems = document.querySelector(".movies-items");
        const seriesItems = document.querySelector(".series-items");
        //Getting bookmarks from localStorage
        const bookmarks =
          JSON.parse(localStorage.getItem("bookmarkedMovies")) || [];
        //Getting output id

        fetch("./data.json")
          .then((response) => response.json())
          .then((data) => {
            console.log(data);
            data.filter((movie) => {
              if (bookmarks.indexOf(movie.title) !== -1) {
                if (movie.category === "Movie") {
                  movieItems.innerHTML += renderMovie(movie);
                } else {
                  seriesItems.innerHTML += renderMovie(movie);
                }
              }
            });
          });
      }
    </script>
    <script src="script.js"></script>
    <script type="module" src="index.js"></script>
    <!-- <script src="movies.js"></script> -->
    <!-- <script src="series.js"></script> -->
  </body>
</html>
